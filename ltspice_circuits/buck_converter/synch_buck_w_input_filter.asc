Version 4
SHEET 1 3064 1092
WIRE -592 -272 -720 -272
WIRE -448 -272 -512 -272
WIRE -384 -272 -448 -272
WIRE -208 -272 -304 -272
WIRE 240 -272 240 -336
WIRE 240 -272 -208 -272
WIRE 240 -224 240 -272
WIRE 96 -144 48 -144
WIRE 192 -144 176 -144
WIRE 48 -112 48 -144
WIRE 48 0 48 -32
WIRE 240 0 240 -128
WIRE 240 0 48 0
WIRE 608 0 240 0
WIRE 800 0 688 0
WIRE 832 0 800 0
WIRE 944 0 912 0
WIRE 1040 0 944 0
WIRE 1184 0 1120 0
WIRE 1312 0 1184 0
WIRE 1488 0 1312 0
WIRE -720 16 -720 -272
WIRE -448 16 -448 -272
WIRE -208 16 -208 -272
WIRE 240 96 240 0
WIRE 1312 96 1312 0
WIRE 944 112 944 0
WIRE 1184 112 1184 0
WIRE 800 144 800 0
WIRE 96 176 48 176
WIRE 192 176 176 176
WIRE 48 192 48 176
WIRE -720 304 -720 96
WIRE -448 304 -448 80
WIRE -448 304 -720 304
WIRE -208 304 -208 80
WIRE -208 304 -448 304
WIRE 48 304 48 272
WIRE 48 304 -208 304
WIRE 240 304 240 192
WIRE 240 304 48 304
WIRE 800 304 800 208
WIRE 800 304 240 304
WIRE 944 304 944 176
WIRE 944 304 800 304
WIRE 1184 304 1184 176
WIRE 1184 304 944 304
WIRE 1312 304 1312 176
WIRE 1312 304 1184 304
WIRE 240 336 240 304
FLAG 240 336 0
FLAG 240 -336 input_voltage
FLAG 1488 0 output_voltage
SYMBOL nmos 192 96 R0
SYMATTR InstName M1
SYMATTR Value IPB65R420CFD
SYMBOL nmos 192 -224 R0
SYMATTR InstName M2
SYMATTR Value IPB65R420CFD
SYMBOL voltage 48 -128 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 216 49 Left 2
SYMATTR Value PULSE(0 15 {dt_pri1+pri_dly} 1n 1n {d1} {Ts})
SYMATTR InstName V1
SYMBOL voltage 48 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 210 96 Left 2
SYMATTR Value PULSE(15 0 {dt_pri2+pri_dly} 1n 1n {d2} {Ts})
SYMATTR InstName V2
SYMBOL res 192 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL res 192 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL voltage -720 0 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.01
SYMATTR InstName V5
SYMATTR Value PULSE(400 390 20m 1n 1n 1s)
SYMBOL ind 592 16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1m
SYMBOL cap 784 144 R0
SYMATTR InstName C1
SYMATTR Value 20µ
SYMBOL ind -608 -256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 10µ
SYMBOL ind -400 -256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value 100µ
SYMBOL cap -464 16 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL cap -224 16 R0
SYMATTR InstName C3
SYMATTR Value 100µ
SYMBOL ind 816 16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value 10µ
SYMBOL ind 1024 16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L5
SYMATTR Value 10µ
SYMBOL cap 928 112 R0
SYMATTR InstName C4
SYMATTR Value 2.2µ
SYMBOL cap 1168 112 R0
SYMATTR InstName C5
SYMATTR Value 20µ
SYMBOL current 1312 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PULSE(0 10 10m 1n 1n 1s)
TEXT -752 360 Left 2 !.tran 0 30m 1u
TEXT 1000 -552 Left 2 !.param duty= 0.5; half bridge duty ratio\n.param fsw= 20k ; Switching frequency\n.param dt=300n ; dead time
TEXT 1000 -432 Left 2 !.param Ts= 1/fsw; switch cycle time\n.param d1= 1/fsw*duty-dt; high side switch on time\n.param d2= 1/fsw*duty+dt; dead time
TEXT 1000 -296 Left 2 !.param dt_sec =100n;switch cycle time\n.param d1_sec= 1/fsw/2-dt_sec; high side switch on time\n.param d2_sec= 1/fsw/2+dt_sec; dead time
TEXT 1000 -192 Left 2 !.param dt_pri1=dt_sec+dt/2 ; Switching frequency\n.param dt_pri2=dt_sec-dt/2; dead time
TEXT -728 -408 Left 2 !.param pri_dly =  0
TEXT -728 -376 Left 2 !.param sec_dly =  1/fsw/2+1/fsw/4*ph_ctrl/100;
TEXT -728 -488 Left 2 !.param ph_ctrl=0
